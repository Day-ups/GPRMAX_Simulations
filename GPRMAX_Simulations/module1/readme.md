# é¡¹ç›®è¯´æ˜

é¡¹ç›®ç»“æ„ç¤ºæ„å›¾ï¼š
<pre>
ğŸ“¦ module1/
â”œâ”€â”€ ğŸ“‚ autoMakeFiles/
â”‚   â”œâ”€â”€ ğŸ“œ make_in_files.py
â”‚   â”œâ”€â”€ ğŸ“œ changeInFiles.py
â”‚   â””â”€â”€ ğŸ“‚ results_of_in_files/
â”œâ”€â”€ ğŸ“‚ initial_in_files/
â”œâ”€â”€ ğŸ“‚ results/
â”‚   â”œâ”€â”€ ğŸ“‚ outFiles/
â”‚   â””â”€â”€ ğŸ“‚ outPictures/
â”œâ”€â”€ ğŸ“‚ sources/
â”œâ”€â”€ ğŸ“œ hollow_cylinder.py
â”œâ”€â”€ ğŸ–¼ï¸ img.png
â””â”€â”€ ğŸ“œ readme.md

</pre>
ï¼ˆ1ï¼‰resultsæ–‡ä»¶å¤¹ä¸‹çš„outFilesæ–‡ä»¶å¤¹ä¿å­˜äº†è¾“å‡ºçš„merged.outæ–‡ä»¶å’Œ.txtæ–‡ä»¶ã€‚

merged.outæ–‡ä»¶å¯ä»¥è¿˜åŸå›å›¾ç‰‡ï¼Œç”¨äºå¤‡ä»½ï¼›

.txtæ–‡ä»¶è¯´å®è¯æˆ‘ä¹Ÿæ²¡æƒ³å¥½ç”¨æ¥å¹²å•¥ï¼Œåªæ˜¯ç¤ºä¾‹ä»£ç é‡Œéƒ½æœ‰è¿™ä¹ˆä¸€è¡Œï¼ˆé›¾ï¼‰ï¼Œå¦‚æœè§‰å¾—æµªè´¹ç©ºé—´å…¶å®åº”è¯¥æ˜¯åˆ äº†ä¹Ÿæ²¡å•¥é—®é¢˜çš„ï¼ˆå¤§å˜˜ï¼‰ï¼›

outPicturesä¿å­˜äº†æ‰€æœ‰ç”Ÿæˆçš„å›¾ç‰‡ï¼ŒæŒ‰ç…§åå­—ï¼Œæ¯ä¸€ä¸ªéƒ½åŠ ä¸€ä¸ª_iï¼Œå…¶ä¸­ i ä¸ºä»¥è¿™ä¸ªæ¨¡å‹çš„åå­—å¼€å¤´çš„ç¬¬iå¼ å›¾ç‰‡ã€‚

**å»ºè®®åœ¨æ¯ä¸€æ¬¡è¿è¡Œå‰éƒ½æŠŠoutFileså’ŒoutPicturesé‡Œçš„æ–‡ä»¶éƒ½æŒªèµ°ï¼Œä¸ç„¶è¿™ä¿©æ–‡ä»¶å¯èƒ½ä¸ä¼šä¸€ä¸€å¯¹åº”ã€‚å¾’å¢éº»çƒ¦ã€‚**

ï¼ˆ2ï¼‰sourcesæ–‡ä»¶å¤¹é‡Œä¸¢äº†æ‰€æœ‰çš„.inæ–‡ä»¶ï¼›ä¸€ä¸ª.h5æ–‡ä»¶ï¼›PVC.txtï¼ˆä»‹è´¨å±æ€§ï¼‰ã€‚

å’³å’³ã€‚æ˜¾ç„¶æŠŠæ‰€æœ‰.inæ–‡ä»¶æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å¤¹æ˜¯ä¸€ä¸ªæ›´åŠ æ˜æ™ºçš„é€‰æ‹©ã€‚ä½†â€¦â€¦ä¸çŸ¥é“ä¸ºä»€ä¹ˆå‡ºç°äº†éå¸¸ç‰›é­”çš„bugï¼Œäºæ˜¯æˆ‘å°±å¼€æ‘†äº†ï¼Œéš¾çœ‹å°±éš¾çœ‹ç½¢ï¼ˆæ— æ…ˆæ‚²ï¼‰ã€‚

è¿™å‡ å¨æ–‡ä»¶ä¸è¦éšä¾¿æŒªä½ç½®ã€‚

ï¼ˆ3ï¼‰hollow_cylindder.pyæ–‡ä»¶æ˜¯ç”¨æ¥è·‘æ¨¡å‹çš„æ ¸å¿ƒæ–‡ä»¶ï¼š

![img.png](img.png)

å…¶ä¸­çš„æ¯ä¸€å—æˆ‘å·²ç»å°½å¯èƒ½ä½¿ä¹‹ç‹¬ç«‹äº†ï¼Œåœ¨åˆ«çš„ç”µè„‘ä¸Šè·‘ä¸»è¦å°±æ”¹æ”¹dmaxè¿™ä¸ªå‚æ•°ï¼š

```python
dmax = r"E:\GPRMAX_Simulations"  # é¡¹ç›®æ ¹ç›®å½•
```

å¯èƒ½æœ‰å¿˜äº†æ”¹çš„è·¯å¾„ï¼Œè¿™æ˜¯æˆ‘çš„é”™ï¼Œä½†æˆ‘æ˜¯ä¸ä¼šä¸ºæ­¤é“æ­‰çš„ã€‚æ‘©â˜…è‰¾â˜…ï¼
ï¼ˆå¼€ç©ç¬‘çš„ï¼Œè°ƒæˆè‡ªå·±ç”µè„‘çš„è·¯å¾„å°±å¥½ï¼‰

ï¼ˆ4ï¼‰autoMakeFilesæ–‡ä»¶å¤¹

make_in_filesè¿™ä¸ªè„šæœ¬æ˜¯ç”¨æ¥è‡ªåŠ¨ç”Ÿæˆ.inæ–‡ä»¶çš„ã€‚

ä¸ºäº†ä¿é™©èµ·è§ï¼Œæˆ‘æŠŠè¿™äº›.inæ–‡ä»¶å…ˆä¸¢åˆ°dmax\module1\autoMakeFiles\results_of_in_filesï¼Œç„¶åä½ å†æ‰‹åŠ¨æŠŠè¿™äº›.inæ–‡ä»¶å¤åˆ¶åˆ°sourcesæ–‡ä»¶å¤¹é‡Œã€‚

ï¼ˆdmaxæ˜¯é¡¶å±‚æ–‡ä»¶çš„ç›®å½•ï¼Œå¦‚æœæˆ‘æ²¡æœ‰å†™é”™çš„è¯åº”è¯¥æ˜¯å”¯ä¸€ä¸€ä¸ªéœ€è¦ä½ æ‰‹åŠ¨æ”¹çš„å‚æ•°ï¼‰

è¿è¡Œè¿™ä¸ªç¨‹åºï¼Œä¼šè®©ä½ é€‰æ‹©æ˜¯æŒ‰Â±xã€Â±yæ–¹å‘ç”ŸæˆæŒªåŠ¨ä½ç½®ï¼Œå¹¶è‡ªåŠ¨è®¡ç®—å‡ºè¾¹ç•Œï¼Œä¸€ç›´ç”Ÿæˆåˆ°ä¸è¾¹ç•Œç›¸åˆ‡ä¸ºæ­¢ã€‚

è¿™ä¸ªç¨‹åºå¯ä»¥æ¯”è¾ƒå®¹æ˜“åœ°å¤ç”¨åˆ°å…¶å®ƒæ¨¡å‹çš„è‡ªåŠ¨åŒ–ç”Ÿæˆä¸­ã€‚åªéœ€æ”¹å¦‚ä¸‹â€œæ¨¡æ¿æ®µâ€ï¼š

```python
# åŸºç¡€å·¥ç¨‹æ¨¡æ¿
template = """#title: B-scan from a metal cylinder and a PVC hollow cylinder buried in a dielectric half-space
#domain: 3.000 0.500 0.002
#dx_dy_dz: 0.002 0.002 0.002
#time_window: 9e-9

#material: 6 0 1 0 half_space
#material: 3.3 0 1 0 PVC

#waveform: ricker 1 1.5e9 my_ricker
#hertzian_dipole: z 0.040 0.400 0 my_ricker
#rx: 0 0.400 0
#src_steps: 0.025 0 0
#rx_steps: 0.0250 0 0

#box: 0 0 0 3.000 0.400 0.002 half_space
#cylinder: 0.500 0.100 0 0.500 0.100 0.002 0.020 pec
cylinder: 1.800 0.200 0 1.800 0.200 0.002 0.030 pec
#geometry_objects_read: {x_pos} {y_pos} 0 E:\\GPRMAX_Simulations\\module1\\sources\\hollow_cylinder.h5 E:\\GPRMAX_Simulations\\module1\\sources\\PVC.txt
"""
```

{x_pos} {y_pos}æ˜¯è¦æ”¹åŠ¨çš„ä¸­å¿ƒä½ç½®ã€‚æ¯æ¬¡ç§»åŠ¨0.02ï¼ˆåˆ†è¾¨ç‡çš„10å€ï¼‰ã€‚

ä¸Šé¢æ˜¯ä¸­å¿ƒæ²¡æœ‰åŠ æ°´çš„ã€‚ä¸‹é¢çš„æ˜¯åŠ äº†æ°´æŸ±çš„æ¨¡æ¿ï¼š
```python
"""#title: B-scan from a metal cylinder and a PVC hollow cylinder buried in a dielectric half-space
#domain: 3.000 0.500 0.002
#dx_dy_dz: 0.002 0.002 0.002
#time_window: 9e-9

#material: 6 0 1 0 half_space
#material: 81 0.01 1 0 water
#material: 3.3 0 1 0 PVC

#waveform: ricker 1 1.5e9 my_ricker
#hertzian_dipole: z 0.040 0.400 0 my_ricker
#rx: 0 0.400 0
#src_steps: 0.025 0 0
#rx_steps: 0.0250 0 0

#box: 0 0 0 3.000 0.400 0.002 half_space
#cylinder: {water_x} {water_y} 0 {water_x} {water_y} 0.002 0.060 water
#geometry_objects_read: {x_pos} {y_pos} 0 E:\\GPRMAX_Simulations\\module1\\sources\\hollow_cylinder.h5 E:\\GPRMAX_Simulations\\module1\\sources\\pec.txt
"""
```

è¿™æ—¶å€™éœ€è¦è°ƒçš„å‚æ•°å°±å¤šäº†ä¸¤ä¸ªï¼ˆæ°´æŸ±ä¸­å¿ƒçš„ä½ç½®ï¼‰ã€‚

changeInFiles.pyç”¨äºè§£å†³ä¸åŒè®¾å¤‡ä¸Šç”¨changeInFiles.pyçš„è·‘å‡ºæ¥çš„.inæ–‡ä»¶é¡¶å±‚è·¯å¾„ä¸åŒçš„é—®é¢˜ã€‚

æ‰‹åŠ¨ä¿®æ”¹è¯¥è„šæœ¬ä¸­çš„ä»¥ä¸‹ä»£ç æ®µï¼š
```python
dmax = "E:\\GPRMAX_Simulations"  # æ–°çš„é¡¶å±‚ç›®å½•è·¯å¾„
old_dmax1 = "D:\\disk_f\\cxcy_gpr\\GPRMAX_Simulations"  # éœ€è¦æ›¿æ¢çš„ç¬¬ä¸€å¤„æ—§è·¯å¾„
old_dmax2 = "D:\\disk_f\\cxcy_gprGPRMAX_Simulations"  # éœ€è¦æ›¿æ¢çš„ç¬¬äºŒå¤„æ—§è·¯å¾„(æ³¨æ„è¿™é‡Œæ²¡æœ‰æ–œæ )
```

old_dmax1æ˜¯åŸå…ˆ.h5æ–‡ä»¶çš„é¡¶å±‚ç›®å½•ï¼Œold_dmax2æ˜¯åŸå…ˆçš„ææ–™material.txtçš„é¡¶å±‚ç›®å½•ï¼ˆé˜²æ­¢æœ‰äººæŠŠå®ƒä»¬æ”¾åœ¨ä¸åŒçš„è·¯å¾„ä¸‹ï¼‰




